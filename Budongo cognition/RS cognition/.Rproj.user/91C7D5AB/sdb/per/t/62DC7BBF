{
    "contents" : "### Importing and processing Ruth Sonnweber's data\n\n\nsetwd('Z:/chimp cognitive data/RS/training/')\n\n\n## sample sheet to work with (for now)\n\n\nhder = c(\n  \"Section\",\"Trial\",\"RT\",\"CorrectResponse\",\"Response\",\"TrialType\",\"Stimulus Location 1\",\n  \"Stimulus Location 2\",\"Coordinates\",\"Correctness\",\"FileNames1\",\"FileNames2\")\n\ntrain <- read.csv(file=\"2-choice AA1 black/2013_10_17_14_53_17_744465.csv\", header= FALSE, skip = 7)\ncolnames(train) = hder\ntrain$chimp = read.csv(file=\"2-choice AA1 black/2013_10_17_14_53_17_744465.csv\", header=FALSE)[4,1]\ntrain$date = read.csv(file=\"2-choice AA1 black/2013_10_17_14_53_17_744465.csv\", header=FALSE)[1,2]\n\n\n\n\nsetwd(\"2-choice AA1 black/\")\ntemp = list.files(pattern=\"*.csv\")\n\ntrainAA1 <- NULL\nfor (i in 1:length(temp)){\n  trainAA1 = rbind(trainAA1, RSbySheet(temp[i], hder))\n}\ntrainAA1$stage = \"AA1\"\n\nsetwd(\"../2-choice AA2 black/\")\ntemp = list.files(pattern=\"*.csv\")\n\ntrainAA2 <- NULL\nfor (i in 1:length(temp)){\n  trainAA2 = rbind(trainAA2, RSbySheet(temp[i], hder))\n}\ntrainAA2$stage = \"AA2\"\n\n#\nsetwd('../2-choice ABpairs2_fine/')\ntemp = list.files(pattern=\"*.csv\")\n\ntrainABp2 <- NULL\nfor (i in 1:length(temp)){\n  trainABp2 = rbind(trainABp2, RSbySheet(temp[i], hder))\n}\ntrainABp2$stage = \"ABp2\"\n\n#\nsetwd(\"../2-choice ABpairs3_fett/\")\ntemp = list.files(pattern=\"*.csv\")\n\ntrainABp3 <- NULL\nfor (i in 1:length(temp)){\n  trainABp3 = rbind(trainABp3, RSbySheet(temp[i], hder))\n}\ntrainABp3$stage = \"ABp3\"\n\n#\nsetwd(\"../2-choice ABpairs4/\")\ntemp = list.files(pattern=\"*.csv\")\n\ntrainABp4 <- NULL\nfor (i in 1:length(temp)){\n  trainABp4 = rbind(trainABp4, RSbySheet(temp[i], hder))\n}\ntrainABp4$stage = \"ABp4\"\n\n###\nsetwd(\"../../testing/all/\")\ntemp = list.files(pattern=\"*.csv\")\n\ntesting <- NULL\nfor (i in 1:length(temp)){\n  testing = rbind(testing, RSbySheet(temp[i], hder))\n}\ntesting$stage = \"test\"\n\n# putting them all together\nRSdat = rbind(trainAA1, trainAA2, trainABp2, trainABp3, trainABp4, testing)\n\n\n## importing personality\nsetwd('Z:/chimp cognitive data/RS/')\naggPers = read.csv(\"aggregatedPers.csv\", header=TRUE)\n\n# two groups:\n# AA (features): 6 - FK, KL, EM, LB, ED\n# AB (association): 5 - CI, EV, PA, PE, DA, LO\n\n# these need to be centered and scaled first\naggPers <- cbind(aggPers,scale(aggPers[,3:8]))\naggPers$depend = c('AB','AB','AA','AA','AB','AA','X','AA','X','X','AA','AB','X','AB','AB',\n                   'X','X','X')\ncolnames(aggPers)[3:8] <- list(\"unz.Dom\",\"unz.Ext\",\"unz.Con\",\"unz.Agr\",\"unz.Neu\",\"unz.Opn\")\n## merge dataframes\n\nRSdat$chimp = droplevels(RSdat$chimp)\nlibrary(plyr)\nRSdat$chimp <- revalue(RSdat$chimp, c(\"killimi\"=\"Kilimi\", \"emma\"=\"Emma\", \"lib\"=\"Liberius\",\"frek\"=\"Freek\",\n                       \"edith\"=\"Edith\", \"paul\"=\"Paul\", \"eva\" = \"Eva\", \"louis\"=\"Louis\",\n                       \"pearl\"=\"Pearl\", \"david\" = \"David\", \"cindy\"=\"Cindy\"))\n\n#head(levels(RSdat$chimp),12)\n#levels(droplevels(RSdat$chimp))\n\ntemp = merge(RSdat,aggPers, by.x= \"chimp\", \"Chimp\")\n\n# clean some empty rows from this\n\ntemp=temp[!is.na(temp$RT),]\n\n\n\n### DOES TIME ORDER NEED TO BE MAINTAINED?\n## given that they keep seeing stimuli from previous trial, probably\n\n\n\n\n\n\n\n\n\nRSbySheet <- function(val, hder){\n  load = read.csv(file=val, header=FALSE)\n  imp = NULL\n  if(!is.na(load[11,1])){\n    imp <- read.csv(file=val, header= FALSE, skip = 7)\n    colnames(imp) = hder\n    imp$chimp = load[4,1]\n    imp$date = load[1,2]\n  }\n  \n  return(imp)\n}\n  \n",
    "created" : 1445529087484.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1274368769",
    "id" : "62DC7BBF",
    "lastKnownWriteTime" : 1453314745,
    "path" : "C:/Users/s1229179/GitHub/R/Budongo cognition/RS cognition/RS_import.R",
    "project_path" : "RS_import.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}