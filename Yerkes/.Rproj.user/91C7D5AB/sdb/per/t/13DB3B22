{
    "collab_server" : "",
    "contents" : "### take the MIDUS combined file and analyze it\n\n#midus_c <- read.table()\n\n# vars of interest\n# $M2ID\n# $B4ZAGE - respondent age at P4 data collection\n# $B1PRSEX - \"gender\" (1 = male, 2 = female)\n# \n# $B1SOPEN\n# $B1SAGREE\n# $B1SCONS2\n# $B1SNEURO\n# $B1SEXTRA\n# $B1SAGENC\n#\n# $B4ZCOMPY - year of collection of biomarker data\n#\n# $B4PBMI - BMI\n# $B4BCHOL - total cholesterol\n# $B4BTRIGL - triglycerides\n# $B4BSCREA - creatinine\n# $B4BSBAP - alkaline phosphatase\n# $B4BGLUC\n# $B4P1GS23 - average sitting systolic (2nd + 3rd measures)\n# $B4P1GD23 - average sitting diastolic\n\nmidus_c$ageAtBloodDraw <- midus_c$B4ZCOMPY - midus_c$B1PBYEAR\n\n### cleaning & scaling\n\n# this is junk\n# attach(midus_c)\n# ageAtBloodDraw[outliers(ageAtBloodDraw,3.5)]<-NA\n# #B1SOPEN[outliers(B1SOPEN,3.5)]<-NA\n# #B1SAGREE[outliers(B1SAGREE,3.5)]<-NA\n# #B1SCONS2[outliers(B1SCONS2,3.5)]<-NA\n# #B1SNEURO[outliers(B1SNEURO,3.5)]<-NA\n# #B1SEXTRA[outliers(B1SEXTRA,3.5)]<-NA\n# B4PBMI[outliers(B4PBMI,3.5)]<-NA\n# B4BCHOL[outliers(B4BCHOL,3.5)]<-NA\n# B4BTRIGL[outliers(B4BTRIGL,3.5)]<-NA\n# B4BSCREA[outliers(B4BSCREA,3.5)]<-NA\n# B4BSBAP[outliers(B4BSBAP,3.5)]<-NA\n# B4BGLUC[outliers(B4BGLUC,3.5)]<-NA\n# B4P1GS23[outliers(B4P1GS23,3.5)]<-NA\n# B4P1GD23[outliers(B4P1GD23,3.5)]<-NA\n# #B1SAGENC[outliers(B1SAGENC,3.5)]<-NA\n# detach(midus_c)\n\nmidus_c$B4ZAGE[outliers(midus_c$B4ZAGE,3.5)]<-NA\nmidus_c$B4ZAGE2 <- (midus_c$B4ZAGE)^2\nmidus_c$B1SOPEN[midus_c$B1SOPEN==8]<-NA\nmidus_c$B1SAGREE[midus_c$B1SAGREE==8]<-NA\nmidus_c$B1SCONS2[midus_c$B1SCONS2==8]<-NA\nmidus_c$B1SNEURO[midus_c$B1SNEURO==8]<-NA\nmidus_c$B1SEXTRA[midus_c$B1SEXTRA==8]<-NA\nmidus_c$B1SAGENC[midus_c$B1SAGENC==8]<-NA\nmidus_c$B4BTRIGL[outliers(midus_c$B4BTRIGL,3.5)]<-NA\nmidus_c$B4PBMI[outliers(midus_c$B4PBMI,3.5)]<-NA\nmidus_c$B4BCHOL[outliers(midus_c$B4BCHOL,3.5)]<-NA\nmidus_c$B4BSCREA[outliers(midus_c$B4BSCREA,3.5)]<-NA\nmidus_c$B4BSBAP[outliers(midus_c$B4BSBAP,3.5)]<-NA\nmidus_c$B4BGLUC[outliers(midus_c$B4BGLUC,3.5)]<-NA\nmidus_c$B4P1GS23[outliers(midus_c$B4P1GS23,3.5)]<-NA\nmidus_c$B4P1GD23[outliers(midus_c$B4P1GD23,3.5)]<-NA\n\nmidus_c$B1SE6A[midus_c$B1SE6A==8]<-NA\nmidus_c$B1SE6B[midus_c$B1SE6B==8]<-NA\nmidus_c$B1SE6C[midus_c$B1SE6C==8]<-NA\nmidus_c$B1SE6D[midus_c$B1SE6D==8]<-NA\nmidus_c$B1SE6E[midus_c$B1SE6E==8]<-NA\nmidus_c$B1SE6F[midus_c$B1SE6F==8]<-NA\nmidus_c$B1SE6G[midus_c$B1SE6G==8]<-NA\nmidus_c$B1SE6H[midus_c$B1SE6H==8]<-NA\nmidus_c$B1SE6I[midus_c$B1SE6I==8]<-NA\nmidus_c$B1SE6J[midus_c$B1SE6J==8]<-NA\nmidus_c$B1SE6K[midus_c$B1SE6K==8]<-NA\nmidus_c$B1SE6L[midus_c$B1SE6L==8]<-NA\nmidus_c$B1SE6M[midus_c$B1SE6M==8]<-NA\nmidus_c$B1SE6N[midus_c$B1SE6N==8]<-NA\nmidus_c$B1SE6O[midus_c$B1SE6O==8]<-NA\nmidus_c$B1SE6P[midus_c$B1SE6P==8]<-NA\nmidus_c$B1SE6Q[midus_c$B1SE6Q==8]<-NA\nmidus_c$B1SE6R[midus_c$B1SE6R==8]<-NA\nmidus_c$B1SE6S[midus_c$B1SE6S==8]<-NA\nmidus_c$B1SE6T[midus_c$B1SE6T==8]<-NA\nmidus_c$B1SE6U[midus_c$B1SE6U==8]<-NA\nmidus_c$B1SE6V[midus_c$B1SE6V==8]<-NA\nmidus_c$B1SE6W[midus_c$B1SE6W==8]<-NA\nmidus_c$B1SE6X[midus_c$B1SE6X==8]<-NA\nmidus_c$B1SE6Y[midus_c$B1SE6Y==8]<-NA\nmidus_c$B1SE6Z[midus_c$B1SE6Z==8]<-NA\nmidus_c$B1SE6AA[midus_c$B1SE6AA==8]<-NA\nmidus_c$B1SE6BB[midus_c$B1SE6BB==8]<-NA\nmidus_c$B1SE6CC[midus_c$B1SE6CC==8]<-NA\nmidus_c$B1SE6DD[midus_c$B1SE6DD==8]<-NA\nmidus_c$B1SE6EE[midus_c$B1SE6EE==8]<-NA\n\nmidus_cs <- with(midus_c,data.frame(M2ID,sex=B1PRSEX, age=s(B4ZAGE), age2=s(B4ZAGE2),\n                                    Dominance=s(B1SAGENC),Extraversion=s(B1SEXTRA),Openness=s(B1SOPEN),\n                                    Conscientiousness=s(B1SCONS2),Agreeableness=s(B1SAGREE),Neuroticism=s(B1SNEURO),                               \n                                    BMI=s(B4PBMI),chol=s(B4BCHOL),creat=s(B4BSCREA),trig=s(B4BTRIGL),\n                                    sys=s(B4P1GS23),dias=s(B4P1GD23),\n                                    alp=s(B4BSBAP),glucose=s(B4BGLUC),\n                                    sys_all = s(B4P1GS), dias_all = s(B4P1GD),\n                                    Outgoing=s(B1SE6A),Helpful=s(B1SE6B),Moody=s(B1SE6C),\n                                    Organized=s(B1SE6D),Selfconfident=s(B1SE6E),Friendly=s(B1SE6F),\n                                    Warm=s(B1SE6G),Worrying=s(B1SE6H),Responsible=s(B1SE6I),\n                                    Forceful=s(B1SE6J),Lively=s(B1SE6K),Caring=s(B1SE6L),\n                                    Nervous=s(B1SE6M),Creative=s(B1SE6N),Assertive=s(B1SE6O),\n                                    Hardworking=s(B1SE6P),Imaginative=s(B1SE6Q),Softhearted=s(B1SE6R),\n                                    Calm=s(B1SE6S),Outspoken=s(B1SE6T),Intelligent=s(B1SE6U),\n                                    Curious=s(B1SE6V),Active=s(B1SE6W),Careless=s(B1SE6X),\n                                    Broadminded=s(B1SE6Y),Sympathetic=s(B1SE6Z),Talkative=s(B1SE6AA),\n                                    Sophisticated=s(B1SE6BB),Adventurous=s(B1SE6CC),Dominant=s(B1SE6DD),\n                                    Thorough=s(B1SE6EE)\n                                    ))\n\n\n# implement this across datasets\n#sex=s(B1PRSEX,scale=FALSE)\n\n### models\n### add Agency personality (24/03/15)\n\nm.sys <- lm(sys ~ age + sex + BMI\n            + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_1\n\nm.dias <- lm(dias ~ age +sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n\nm.chol <- lm(chol ~ age +sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_2a\n\nm.trig <- lm(trig ~ age +sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_2b\n#leave out?\n\nm.creat <- lm(creat ~ age +sex + BMI \n              + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m2u\n\nm.alp <- lm(alp ~ age +sex + BMI\n            + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m2w\n\nm.gluc <- lm(glucose ~ age +sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_2c ++\n\nm.BMI <- lm(BMI ~ age +sex\n                      + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m3.BMIc\n\n\n### hmm so does the first BP get thrown by people being nervous?\n\nm.sys.all = lm(sys_all ~ age + sex + BMI\n   + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n\nm.dias.all = lm(dias_all ~ age + sex + BMI\n              + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n\n\n### chol on BP?\n\ncor.BPfromChol <- cor(midus_cs$sys,midus_cs$chol)\n\n\n\n##### Age^2 examination\n\nm.sys.a2 <- lm(sys ~ age + I(age^2) + sex + BMI\n            + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_1\n\nm.dias.a2 <- lm(dias ~ age + I(age^2) + sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n\nm.chol.a2 <- lm(chol ~ age + I(age^2) + sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_2a\n\nm.trig.a2 <- lm(trig ~ age + I(age^2) + sex + BMI\n             + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m_2b\n#leave out?\n\nm.creat.a2 <- lm(creat ~ age + I(age^2) + sex + BMI \n              + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m2u\n\nm.BMI.a2 <- lm(BMI ~ age + I(age^2) + sex\n            + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, data = midus_cs)\n# see m3.BMIc\n\n\n\n### coming out of the SEMs\n\n#all2$AL = all2$sys + all2$dias + all2$chol + all2$trig + all2$BMI # these are medication adjusted, too\nmaAL.1 <- lm(AL ~ age + age2 + sex\n            + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion,\n            data = all3[all3$sample=='MIDUS',])\nsummary(maAL.1)\nconfint(maAL.1)\n\n\nmidus_cs$AL = midus_cs$sys + midus_cs$dias + midus_cs$chol + midus_cs$trig + midus_cs$BMI # these need medication adjustment\nmaALallItems.1 <- lm(AL ~ age + age2 + sex\n             + Outgoing + Helpful + Moody + Organized + Selfconfident + Friendly + Warm + Worrying\n             + Responsible + Forceful + Lively + Caring + Nervous + Creative + Assertive\n             + Hardworking + Imaginative + Softhearted + Calm + Outspoken + Intelligent + Curious\n             + Active + Careless + Broadminded + Sympathetic + Talkative + Sophisticated + Adventurous\n             + Dominant + Thorough,\n             data = midus_cs)\n\n\n\n# LASSO\nlibrary(glmnet)\n\nalif = 0.1\n\nnetformA = as.matrix(as.data.frame(lapply(midus_cs[complete.cases(midus_cs),], as.numeric)))\n\nnet.A = glmnet(netformA[,c(2:4,21:51)], netformA[,c(11,12,14:16)],\n               family='mgaussian',standardize=T,\n               nlambda=1000, alpha = alif)\ncvnet.A = cv.glmnet(netformA[,c(2:4,21:51)], netformA[,c(11,12,14:16)],family='mgaussian',nfolds=100,alpha=alif)\nplot(cvnet.A)\n\ncoef(net.A,s=cvnet.A$lambda.min)\n\n\n\nnet.A.AL = glmnet(netformA[,c(2:4,21:51)], netformA[,c(52)],\n               family='gaussian',standardize=T,\n               nlambda=1000, alpha = alif)\ncvnet.A.AL = cv.glmnet(netformA[,c(2:4,21:51)], netformA[,c(52)],family='gaussian',nfolds=100,alpha=alif)\nplot(cvnet.A.AL)\n\ncoef(net.A.AL,s=cvnet.A.AL$lambda.min)\n\n\n\n\n\n### EXPERIMENTAL\n\nlibrary(BayesFactor)\n\nBFm.test <- lmBF(sys ~ age, data=midus_cs)\n\nBFm.test <- lmBF(sys ~ age + sex, data=midus_cs)\n\n\nBFm.sys <- regressionBF(sys ~ age + sex + BMI #+ I(age^2)\n                + Dominance + Openness + Agreeableness + Conscientiousness + Neuroticism + Extraversion, \n                data = midus_cs[complete.cases(midus_cs),])\n\n#summary(BFm.sys)\nhead(BFm.sys)\n",
    "created" : 1463073427705.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2845683674",
    "id" : "13DB3B22",
    "lastKnownWriteTime" : 1494431632,
    "last_content_update" : 1494431632988,
    "path" : "C:/Users/s1229179/GitHub/R/Yerkes/Drew version/midusRegs.R",
    "project_path" : "Drew version/midusRegs.R",
    "properties" : {
    },
    "relative_order" : 9,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}