{
    "collab_server" : "",
    "contents" : "### Creatine-weight pseudo replication, inspired by ME Thompson et al. 2016\n\n# attempting to use 'fullcast' df\n\n\n\n# retain:\n# Creatine\n# Personality\n# Weights\n# age , time\n\n\n# cw.df1 <- fullcast[,c(1,2,5,47,48,95:100)]\n# \n# cw.df1 <- cw.df1[!(is.na(cw.df1$Creatine) & is.na(cw.df1$weight)),]\n# # Agatha: beware dumb shit date entries\n\ncw.df1 <- dmdob[,c(2,4,7,33,59,85,268,271,274)]\n\ncolnames(cw.df1) <- c('chimp','Year4','c4','c3','c2','c1','w3','w2','w1')\n\ncw.df1 <- cw.df1[!(is.na(cw.df1$w3)),]\n\n\n\nlibrary(lavaan)\nlibrary(semPlot)\nlibrary(blavaan)\n\n\n# a linear growth model with a time-varying covariate\nmod.1 <- '\n# intercept and slope with fixed coefficients\ni =~ 1*w3 + 1*w2 + 1*w1\ns =~ 1*w3 + 2*w2 + 3*w1\n\ni.c =~ 1*c4 + 1*c3 + 1*c2 + 1*c1\ns.c =~ 0*c4 + 1*c3 + 2*c2 + 3*c1\n# regressions\n#i ~ x1 + x2\n#s ~ x1 + x2\n# time-varying covariates\nw1 ~ c2\nw2 ~ c3\nw3 ~ c4\n#t4 ~ c4\n\n# regs for earlier c LVs onto later w LVs\ni ~ i.c + s.c\ns ~ i.c + s.c\n'\nfit <- growth(mod.1, data = cw.df1, missing=\"ML\")\nsemPaths(fit)\nsummary(fit)\n\n\n# changing weight into a latent variable\nmod.2 <- '\n# intercept and slope with fixed coefficients\ni.c =~ 1*c4 + 1*c3 + 1*c2 + 1*c1\ns.c =~ 0*c4 + 1*c3 + 2*c2 + 3*c1\n\nWt =~ w3 + w2 + w1\n\n# regressions\n#i ~ x1 + x2\n#s ~ x1 + x2\n# time-varying covariates\n\n\n# regs for earlier c LVs onto later w LV\nWt~ i.c + s.c\n'\nfit <- lavaan(mod.2, data = cw.df1, missing=\"ML\", model.type='growth',\n              int.ov.free = TRUE, int.lv.free = FALSE, auto.fix.first = TRUE, \n              auto.fix.single = TRUE, auto.var = TRUE, auto.cov.lv.x = TRUE, auto.th = TRUE, auto.delta = TRUE, \n              auto.cov.y = TRUE)\n\nsemPaths(fit, what='mod', whatLabels = 'par')\nsummary(fit)\n\nbfit2.1 <- blavaan(mod.2, data = cw.df1, missing=\"ML\", model.type='growth',\n               int.ov.free = TRUE, int.lv.free = FALSE, auto.fix.first = TRUE, \n               auto.fix.single = TRUE, auto.var = TRUE, auto.cov.lv.x = TRUE, auto.th = TRUE, auto.delta = TRUE, \n               auto.cov.y = TRUE)\nmod.2.2 <- '\n# intercept and slope with fixed coefficients\ni.c =~ 1*c4 + 1*c3 + 1*c2 + 1*c1\ns.c =~ 0*c4 + 1*c3 + 2*c2 + 3*c1\n\nWt =~ w3 + w2 + w1\n\n# regressions\n#i ~ x1 + x2\n#s ~ x1 + x2\n# time-varying covariates\n\n# regs for earlier c LVs onto later w LV\nWt~ i.c + 0*s.c\n'\n\nmod.2.3 <- '\n# intercept and slope with fixed coefficients\ni.c =~ 1*c4 + 1*c3 + 1*c2 + 1*c1\ns.c =~ 0*c4 + 1*c3 + 2*c2 + 3*c1\n\nWt =~ w3 + w2 + w1\n\n# regressions\n#i ~ x1 + x2\n#s ~ x1 + x2\n# time-varying covariates\n\n# regs for earlier c LVs onto later w LV\nWt~ 0*s.c + 0*i.c\n'\nfit2.2 <- lavaan(mod.2.2, data = cw.df1, missing=\"ML\", model.type='growth',\n                   int.ov.free = TRUE, int.lv.free = FALSE, auto.fix.first = TRUE, \n                   auto.fix.single = TRUE, auto.var = TRUE, auto.cov.lv.x = TRUE, auto.th = TRUE, auto.delta = TRUE, \n                   auto.cov.y = TRUE)\nfit2.3 <- lavaan(mod.2.3, data = cw.df1, missing=\"ML\", model.type='growth',\n                 int.ov.free = TRUE, int.lv.free = FALSE, auto.fix.first = TRUE, \n                 auto.fix.single = TRUE, auto.var = TRUE, auto.cov.lv.x = TRUE, auto.th = TRUE, auto.delta = TRUE, \n                 auto.cov.y = TRUE)\nsemPaths(fit2.3)\n\n\nmod.2.X <- '\n# just the weight LV\nWt =~ w3 + w2 + w1\n'\nbfit2.X <- blavaan(mod.2.X, data = cw.df1, missing=\"ML\", model.type='growth',\n                   int.ov.free = TRUE, int.lv.free = FALSE, auto.fix.first = TRUE, \n                   auto.fix.single = TRUE, auto.var = TRUE, auto.cov.lv.x = TRUE, auto.th = TRUE, auto.delta = TRUE, \n                   auto.cov.y = TRUE)\nsummary(bfit2.2)\n\nfitMeasures(fit, c(\"chisq\", \"df\", \"pvalue\", \"cfi\", \"rmsea\"))\nfitMeasures(fit2.2, baseline.model = fit,c(\"chisq\", \"df\", \"pvalue\", \"cfi\", \"rmsea\"))\nfitMeasures(fit2.3, baseline.model = fit,c(\"chisq\", \"df\", \"pvalue\", \"cfi\", \"rmsea\"))\n# I'm not sure this is all being done correctly\n\n\n#fitMeasures(bfit2.1)\n\n\n# add personality?\n\n\n\n\n# not a growth model anymore\nmod.3 <- '\n# intercept and slope with fixed coefficients\ni.c =~ c4 + c3 + c2 + c1\n\nWt =~ w3 + w2 + w1\n\n# regressions\n#i ~ x1 + x2\n#s ~ x1 + x2\n# time-varying covariates\n\n\n# regs for earlier c LVs onto later w LV\nWt ~ i.c\n'\n# not currently functional\nfit <- lavaan(mod.3, data = cw.df1, missing=\"ML\",model.type='sem')\nsemPaths(fit)\nsummary(fit)\n\nfit <- growth(mod.3, data = cw.df1, missing=\"ML\")\n\n",
    "created" : 1472660216173.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1978736217",
    "id" : "E0FA9B36",
    "lastKnownWriteTime" : 1472732011,
    "last_content_update" : 1472732011891,
    "path" : "C:/Users/s1229179/GitHub/R/Yerkes/creatineSEMtest.R",
    "project_path" : "creatineSEMtest.R",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "relative_order" : 13,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}