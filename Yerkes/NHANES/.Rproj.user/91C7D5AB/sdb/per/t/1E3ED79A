{
    "collab_server" : "",
    "contents" : "# depends import.R\n\nlibrary(psych)\n\n### Humans\n\ndim(sel.nbm[complete.cases(sel.nbm),])\n\ncolnames(sel.nbm)[3:31] <- colnames(c.bm)[5:33]\n\n\nfa.parallel(sel.nbm[complete.cases(sel.nbm),c(3:31)], fm = 'gls') #  pa?\n# seem like 10\n\nplot(nfactors(sel.nbm[complete.cases(sel.nbm),c(3:31)], fm = 'gls')$map)\n\n\nEFA.Comp.Data(sel.nbm[complete.cases(sel.nbm),c(3:31)], F.Max = 15, Graph = T)\n# okay fine, 10\n\n\nfa.1 <- fa(sel.nbm[,c(3:31)], nfactors = 10, fm = 'minres'\n   )\n\nfa.1a <- fa(sel.nbm[complete.cases(sel.nbm),c(3:31)], nfactors = 10, fm = 'minres'\n)\n\nfa.1x <- fa(sel.nbm[complete.cases(sel.nbm),c(3:31)], nfactors = 10, fm = 'ml'\n)\n\npa.1 <- principal(sel.nbm[,c(3:31)], nfactors = 10\n)\n\n\n### Chimps\n\nnfactors(c.bm[,c(5:33)], fm = 'gls') #  pa?\n\nfa.parallel(c.bm[,c(5:33)], fm = 'minres') #  pa?\n\n# chokes on missing data:\n# EFA.Comp.Data(\n#   aggregate(c.bm[,c(3:32)], by = list(c.bm$chimp), mean)\n#   ,F.Max = 15, Graph = T)\n\nfa.c.1 <- fa(c.bm[,c(5:33)], nfactors = 10, fm = 'minres'\n)\n\n\npa.c.1 <- principal(c.bm[,c(5:33)], nfactors = 10)\n\n\n\n### Factor/Component structure comparisons\n\n# Congruence\n\nfactor.congruence(fa.c.1$loadings, fa.1$loadings)\n       MR1   MR2   MR3   MR9   MR4   MR7   MR5  MR10   MR6   MR8\nMR1   0.79  0.06 -0.05  0.05  0.22 -0.19  0.27 -0.02  0.10 -0.07\nMR3   0.09  0.88 -0.22 -0.08 -0.03  0.11  0.06 -0.07  0.23 -0.08\nMR4  -0.11  0.01 -0.12  0.57  0.07 -0.26  0.00 -0.03 -0.01  0.05\nMR2   0.16  0.05  0.02  0.04 -0.11  0.15  0.55  0.61  0.07  0.09\nMR5   0.03 -0.05 -0.56  0.18  0.42 -0.03 -0.17  0.21  0.17 -0.19\nMR6  -0.01  0.04  0.13  0.28  0.20  0.76  0.05  0.06 -0.11 -0.09\nMR10 -0.01  0.03  0.20 -0.24  0.47 -0.17 -0.22  0.21  0.63  0.05\nMR8   0.03  0.06  0.16  0.15 -0.14  0.17  0.19 -0.04  0.08  0.20\nMR7  -0.01 -0.07  0.30  0.13  0.08  0.05 -0.08 -0.09  0.10  0.00\nMR9   0.02  0.08 -0.08  0.23  0.02 -0.01 -0.23  0.10  0.03  0.65\n\n# components with decent similarity:\n# (C)   (H)\n# MR3 - MR2\n# MR4 - MR9\n# MR2 - MR10 (?)\n# MR5 - MR3 (?)\n# MR6 - MR7\n# MR10 - MR6\n# MR9 - MR8\n\n\n\n\n# Procrustes, using code from the group\n\nprocrustes(fa.c.1$loadings, fa.1$loadings)\n\nprocrustes(fa.c.1$loadings, fa.1$loadings[,c(1:5,10,9,7,8,6)])\n\n\n0.793876724  8.809095e-01  0.71974158  0.747031357  0.59239310  0.82627457\n0.600784478  0.627731145  0.56643907  0.684564831  \n0.7193371\n\n\npcrust = procrustes(fa.1$loadings, fa.c.1$loadings)\n\npcrust = protest(fa.1$loadings, fa.c.1$loadings)\npspc = permustats(pcrust)\n\n\n\npcrusta = procrustes(pa.1$loadings, pa.c.1$loadings)\n0.841861752  0.892964096  0.864579231  0.756832481  0.803025736  0.891505227  0.7185726578\n0.311983995  0.629106243  0.816920692  0.7742925\n\n\n\n\n# based on screes, maybe 6\n\nfa.6 = fa(sel.nbm[complete.cases(sel.nbm),c(3:31)], nfactors = 6, fm = 'gls')\n\nfa.c.6 = fa(c.bm[,c(5:33)], nfactors = 6, fm = 'gls')\n       \n",
    "created" : 1459791720120.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3777691108",
    "id" : "1E3ED79A",
    "lastKnownWriteTime" : 1473426358,
    "last_content_update" : 1473426358,
    "path" : "C:/Users/s1229179/GitHub/R/Yerkes/NHANES/factors.R",
    "project_path" : "factors.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}