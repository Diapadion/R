{
    "collab_server" : "",
    "contents" : "### Formatting and joining for chimp faces\n#\n# Run from the top\n\nlibrary(dplyr)\n\ns <- function(x) {scale(x)}\n\n\n### Import face data\ncPoints = read.csv(file = \"ChimpfWHR.csv\")\n\nchFP <- cPoints[cPoints$fHWR!='N/A',]\nchFP = chFP[,c(1:12)]\n\ncolnames(chFP)[8] <- 'Age'\nchFP$Sex = as.factor(chFP$Sex)\nchFP$fHWR = as.numeric(as.character(chFP$fHWR))\n\nchFP = chFP[!is.na(chFP$fHWR),]\n\n#levels(chFP$ID) <- tolower(levels(chFP$ID))\n\n\n\n### Aggregate face measurements first?\n\nchFP <- aggregate(cbind(fHWR,Sex)~ID+location, chFP, mean) # need Yerkes/Bastrop ages, then Age can go back into LS\n# not strictly necessay with MLM, but averaging is better for consistency\n\n#chFP <- aggregate(chFP, by = list(chFP$ID), FUN = mean)\n\n\n\n\n\n### Import personality data and calculate dimensions\ncPers = read.csv('long_all.csv')\n\n# cutting off the bottom\ncPers <- cPers[-c(558:dim(cPers)[1]),]\n\n# removing row at 378, where the questionnaire changes\ncPers <- cPers[-378,]\n\n# removing AZA and Taronga\ncPers <- cPers[(cPers$sample!='AZA')&(cPers$sample!='Taronga'),]\n\ncPers[,c(7:60)] <- lapply((cPers[,c(7:60)]), as.character)\ncPers[,c(7:60)] <- lapply((cPers[,c(7:60)]), as.numeric)\n\ncPers$Dom = NA\ncPers$Ext = NA\ncPers$Con = NA\ncPers$Agr = NA\ncPers$Neu = NA\ncPers$Opn = NA\n\nind = (cPers$sample == 'Yerkes')\n\ncPers[ind,]$Dom <-\n  (cPers[ind,]$dom-cPers[ind,]$subm-cPers[ind,]$depd+cPers[ind,]$indp-cPers[ind,]$fear+cPers[ind,]$decs\n   -cPers[ind,]$tim-cPers[ind,]$caut+cPers[ind,]$intll+cPers[ind,]$pers+cPers[ind,]$buly+cPers[ind,]$stngy+40)/12\n\ncPers[ind,]$Ext <-\n  (-cPers[ind,]$sol-cPers[ind,]$lazy-cPers[ind,]$depr\n   +cPers[ind,]$actv+cPers[ind,]$play+cPers[ind,]$soc+cPers[ind,]$frdy+cPers[ind,]$affc+cPers[ind,]$imit+24)/9\n\ncPers[ind,]$Con <-\n  (-cPers[ind,]$impl-cPers[ind,]$defn-cPers[ind,]$reckl-cPers[ind,]$errc-cPers[ind,]$irri\n   +cPers[ind,]$pred-cPers[ind,]$aggr-cPers[ind,]$jeals-cPers[ind,]$dsor+64)/9\n\ncPers[ind,]$Agr <-\n  (cPers[ind,]$symp+cPers[ind,]$help+cPers[ind,]$sens+cPers[ind,]$prot+cPers[ind,]$gntl)/5\n\ncPers[ind,]$Neu <-\n  (-cPers[ind,]$stbl+cPers[ind,]$exct-cPers[ind,]$unem+16)/3\n\ncPers[ind,]$Opn <-\n  (cPers[ind,]$inqs+cPers[ind,]$invt) /2\n\n\n\nind = (cPers$sample == 'Japan' | cPers$sample == 'Edinburgh') \n\ncPers[ind,]$Dom <-\n  (cPers[ind,]$dom\n   -cPers[ind,]$subm\n   -cPers[ind,]$depd\n   +cPers[ind,]$indp\n   -cPers[ind,]$fear\n   +cPers[ind,]$decs\n   -cPers[ind,]$tim\n   -cPers[ind,]$caut\n   +cPers[ind,]$intll\n   +cPers[ind,]$pers\n   +cPers[ind,]$buly\n   +cPers[ind,]$stngy\n   -cPers[ind,]$Vuln - cPers[ind,]$Anx + cPers[ind,]$manp + 56)/15\n\ncPers[ind,]$Ext <-\n  (-cPers[ind,]$sol-cPers[ind,]$lazy-cPers[ind,]$depr\n   +cPers[ind,]$actv+cPers[ind,]$play+cPers[ind,]$soc+cPers[ind,]$frdy+cPers[ind,]$affc+cPers[ind,]$imit\n   -cPers[ind,]$Indv + 32)/10\n\ncPers[ind,]$Con <-\n  (-cPers[ind,]$impl-cPers[ind,]$defn-cPers[ind,]$reckl-cPers[ind,]$errc-cPers[ind,]$irri\n   +cPers[ind,]$pred-cPers[ind,]$aggr-cPers[ind,]$jeals-cPers[ind,]$dsor\n   - cPers[ind,]$Thot - cPers[ind,]$Dist - cPers[ind,]$Unper - cPers[ind,]$Quit - cPers[ind,]$clmy + 104)/14\n\ncPers[ind,]$Agr <-\n  (cPers[ind,]$symp+cPers[ind,]$help+cPers[ind,]$sens+cPers[ind,]$prot+cPers[ind,]$gntl\n   + cPers[ind,]$Conv)/6\n\ncPers[ind,]$Neu <-\n  (-cPers[ind,]$stbl+cPers[ind,]$exct-cPers[ind,]$unem\n   - cPers[ind,]$Cool + cPers[ind,]$aut + 24)/5\n\ncPers[ind,]$Opn <-\n  (cPers[ind,]$inqs+cPers[ind,]$invt\n   + cPers[ind,]$Cur + cPers[ind,]$Innov) / 4\n\n\n\n### Bastrop personality scoring\n\nbPers <- read.csv('bastroppersonalitydata.csv')\nbPers = bPers[1:143,]\n\nbPers$Dom = NA\nbPers$Ext = NA\nbPers$Con = NA\nbPers$Agr = NA\nbPers$Neu = NA\nbPers$Opn = NA\n\n\n\nbPers$Dom <-\n  (-bPers$meananxious-bPers$meancautious-bPers$meandependent-bPers$meantimid\n   +bPers$meandominant+bPers$meanbold+bPers$meanbullying+bPers$meanstingy + 4*8\n   )/8\n\nbPers$Ext <-\n  (-bPers$meandepressed-bPers$meansolitary\n    +bPers$meanactive+bPers$meanaffectionatefriendly+bPers$meanaffiliative+bPers$meanplayful + 2*8\n  )/6\n\nbPers$Con <-\n  (-bPers$meanaggressive-bPers$meandefiant-bPers$meanimpulsive-bPers$meanirritable\n   -bPers$meanJealousattentionseeking-bPers$meantemperamentalmoody\n   + 6*8 #+bPers$meanpredictable\n  )/6\n     \nbPers$Agr <- \n  (bPers$meanconsideratekind+bPers$meanprotective)/2\n\nbPers$Neu <- \n  (-bPers$meancalm\n   +bPers$meaneccentric+bPers$meanexcitable + 1*8\n   )/3\n\nbPers$Opn <-\n  (bPers$meaninquisitivecurious+bPers$meaninventive) /2\n\n\n\n\n### Combine the two inventories\n\ncPers = rbind(cPers[,c(1,69:74)],bPers[,c(1,49:54)])\n\n\n\n# Scale each dimension across cPers chimps\ncPers$Dom_CZ <- scale(cPers$Dom)\ncPers$Ext_CZ <- scale(cPers$Ext)\ncPers$Con_CZ <- scale(cPers$Con)\ncPers$Agr_CZ <- scale(cPers$Agr)\ncPers$Neu_CZ <- scale(cPers$Neu)\ncPers$Opn_CZ <- scale(cPers$Opn)\n\n\n\n\n\n\n### Merge face with pers data\n\n#levels(cPers$chimp) <- tolower(levels(cPers$chimp))\nchFP <- merge(chFP,cPers, by.x= \"ID\", \"chimp\")\n\n# remove Yerkes\nchFP <- chFP[chFP$location!='Yerkes',]\n\n",
    "created" : 1487591806504.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1482442335",
    "id" : "E12FCC9",
    "lastKnownWriteTime" : 1491405637,
    "last_content_update" : 1491405637353,
    "path" : "C:/Users/s1229179/GitHub/R/fWHR/mergeFacePers.R",
    "project_path" : "mergeFacePers.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}