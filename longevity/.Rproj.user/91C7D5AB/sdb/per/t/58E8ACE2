{
    "collab_server" : "",
    "contents" : "\nlibrary(foreign)\n\nwisc <- read.spss('Z:/WisconsinLongitudinal/wls_pub_13_03.sav', to.data.frame = T)\n#warnings()\n\nwisc.sib <- wisc[,c('xbrdxdy','xlivsib','xdeatyr','ssbsex','nh009rec','nh009rei',\n                    'nh011rer','nh012rer','nh013rer','nh014rer','nh015rer','nh016rer',\n                    'nh004rer','nh007rer')]\nrm(wisc)\n\nwisc.sib[!(wisc.sib$xlivsib=='no'),] <- NA\nwisc.sib[wisc.sib$xdeatyr %in% c('9972','9972','9974','9976','9977','9997','9999'),] <- NA\nwisc.sib[wisc.sib == 'ref/na'] <- NA\n\ntoScore <- function(val){\n  ifelse(val=='agree strongly', val<-6,\n         ifelse(val=='agree moderately', val<-5,\n                ifelse(val=='agree slightly',val<-4,\n                       ifelse(val=='disagree slightly',val<-3,\n                              ifelse(val=='disagree moderately',val<-2,\n                                     ifelse(val=='disagree strongly',val<-1,\n                                            val<-NA))))))\n}\n\nfor (i in c(7:14)){\n  wisc.sib[,i] = sapply(wisc.sib[,i], toScore)\n}\n\nwisc.sib <- wisc.sib[complete.cases(wisc.sib),]\n\n#table(wisc.sib$xdeatyr)\n#table(wisc.sib$DeathAge)\n\n#wisc.sib$xbrdxdy[wisc.sib$xdeatyr=='1994']\n\nwisc.sib$DeathAge = wisc.sib$xdeatyr - wisc.sib$xbrdxdy - 1900\n\n\nplot(wisc.sib$DeathAge, wisc.sib$nh009rec)\n\ncor.test(wisc.sib$DeathAge, wisc.sib$nh009rec)\n\n\n### New scores\n\n### Altruism\n\n# nh013rer: To what extent do you agree that you see yourself as someone who is generally trusting?\n# nh015rer: To what extent do you agree that you see yourself as someone who is considerate to almost everyone?\n# nh016rer: To what extent do you agree that you see yourself as someone who likes to cooperate with others\n\nwisc.sib$Alt.z <- scale(wisc.sib$nh013rer + wisc.sib$nh015rer + wisc.sib$nh016rer #- wisc.sib$nh014rer + 7\n                        )\n\n### Dominance\n\n# nh011rer: To what extent do you agree that you see yourself as someone who tends to find fault with others?\n# nh012rer: To what extent do you agree that you see yourself as someone who is sometimes rude to others?\n# nh004rer: To what extent do you agree that you see yourself as someone who is reserved?\n# nh007rer: To what extent do you agree that you see yourself as someone who is sometimes shy, inhibited?\n\nwisc.sib$Dom.z <- scale(wisc.sib$nh011rer + wisc.sib$nh012rer - wisc.sib$nh004rer - wisc.sib$nh007rer + 14)\n\n# Exclude?\n\n#? nh014rer: To what extent do you agree that you see yourself as someone who can be cold and aloof?\n\n\n\n###\n\noutliers <- function(obs, x = 2.5)\n  abs(obs - mean(obs, na.rm = T)) > (sd(obs, na.rm = T) * x)\n\nwisc.sib$Alt.z[outliers(wisc.sib$Alt.z)] <- NA\n# rescale\n#wisc.sib$Alt.z <- scale(wisc.sib$Alt.z)\n\n\nplot(wisc.sib$DeathAge, wisc.sib$Alt.z)\n\ncor.test(wisc.sib$DeathAge, wisc.sib$Alt.z)\n\n\n# ugh this works better above than it does here\nwisc.sib$Dom.z[outliers(wisc.sib$Dom.z)] <- NA\n#wisc.sib$Dom.z <- scale(wisc.sib$Dom.z)\n\n\n\nplot(wisc.sib$DeathAge, wisc.sib$Dom.z)\n\n\ncor.test(wisc.sib$DeathAge, wisc.sib$Dom.z)\n\n\n\nlibrary(ggplot2)\n\np <- ggplot(wisc.sib, aes(Dom.z, Alt.z)) + \n  geom_jitter(size = (wisc.sib$DeathAge-20)/7, colour = 'blue', alpha = 0.1) #+\n  #coord_cartesian(xlim = c(-2, 2), ylim = c(-2, 2))\n\np\n\n\n\n### How about some Chimps\n\ndeCH <- datX[datX$stat.log==T,c('age','Dom_CZ','Agr_CZ')]\ncolnames(deCH) <- c('DeathAge','Dom.z','Alt.z')\ndeCH$species = 'chimp'\n\nwisc.sib$species = 'human'\n\nsampH <- sample(1:dim(wisc.sib)[1], dim(deCH[1]))\ndeCH <- rbind(deCH, wisc.sib[sampH,c('DeathAge','Dom.z','Alt.z','species')])\n\n\n# df adjustments for plotting aesthetics\ndeCH$Alt.z[deCH$species=='chimp'] = deCH$Alt.z[deCH$species=='chimp'] / 2.5\n\ndeCH$DeathAge[deCH$species=='human'] = deCH$DeathAge[deCH$species=='human']  -30 #/ 2?\n \n\n# and the final plot\n\nsqu = c(-2.0, 2.0)\n\np <- ggplot(deCH, aes(Dom.z, Alt.z, colour = species)) + \n  #geom_jitter(aes(colour=deCH$species,size = (deCH$DeathAge)/7, alpha = 0.1), position='jitter') #+\n  geom_jitter(size= deCH$DeathAge/2, alpha = 0.5, show.legend = FALSE,\n              width = 0.3, height = 0.3) +  #aes(colour=deCH$species) +\ncoord_cartesian(xlim = squ, ylim = squ) +\n  scale_color_manual(values=c('red','steelblue1')) + theme_bw()\n\np\n\n(\"#FF5252\", \"#1D75E1\")\n#56B4E9\n",
    "created" : 1462464283401.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3455752404",
    "id" : "58E8ACE2",
    "lastKnownWriteTime" : 1462541553,
    "last_content_update" : 1462541553855,
    "path" : "C:/Users/s1229179/GitHub/R/longevity/Comp-Plot.R",
    "project_path" : "Comp-Plot.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 9,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}