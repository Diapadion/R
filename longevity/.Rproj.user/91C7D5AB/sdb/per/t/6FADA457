{
    "collab_server" : "",
    "contents" : "require(ahaz)\n\nattr(yLt, 'type') <- 'counting'\n\nnetform = data.frame(cbind(as.factor(datX$sex), as.numeric(datX$DoB), \n                           as.factor(datX$sample=='Japan'),as.factor(datX$sample=='Yerkes'),\n                           as.factor(datX$sample=='Edinburgh'),\n                           as.factor(datX$origin=='CAPTIVE'),\n                          # as.factor(datX$origin), \n                           datX$Dom_CZ, datX$Ext_CZ, datX$Con_CZ,\n                           datX$Agr_CZ, datX$Neu_CZ, datX$Opn_CZ))\n  \n  \ncolnames(netform) = c(\"sex\",\"DoB\",\"Japan\",'Yerkes','Edinburgh','origin',\n                      'Dom','Ext','Con','Agr','Neu','Opn') \n\nrmatx = model.matrix( ~ sex + DoB + Japan + Yerkes + Edinburgh + origin + \n                        Dom + Ext + Con + Agr + Neu + Opn - 1, netform)\n\nahz.1 <- ahazpen(yLt, rmatx)\n\nplot(ahz.1, labels=TRUE)\n\ncoef(ahz.1)\n\n\n###\n# no DOB included\n\nnetform = data.frame(cbind(as.factor(datX$sex),\n                           as.factor(datX$sample=='Japan'),as.factor(datX$sample=='Yerkes'),\n                           as.factor(datX$sample=='Edinburgh'),\n                           as.factor(datX$origin), \n                           datX$Dom_CZ, datX$Ext_CZ, datX$Con_CZ,\n                           datX$Agr_CZ, datX$Neu_CZ, datX$Opn_CZ))\n\n\ncolnames(netform) = c(\"sex\",\"Japan\",'Yerkes','Edinburgh','origin',\n                      'Dom','Ext','Con','Agr','Neu','Opn') \n\nrmatx = model.matrix( ~ sex + Japan + Yerkes + Edinburgh + origin + \n                        Dom + Ext + Con + Agr + Neu + Opn - 1, netform)\n\nahz.2 <- ahazpen(yLt, rmatx)\n\nplot(ahz.2, labels=TRUE)\n\ncoef(ahz.2)\n\n\n### \n# adjusted for linear and curvilinear time effects\n\nnetform = data.frame(cbind(as.factor(datX$sex),\n                           as.factor(datX$sample=='Japan'),as.factor(datX$sample=='Yerkes'),\n                           as.factor(datX$sample=='Edinburgh'),\n                           as.factor(datX$origin), \n                           datX$Dom_CZ, datX$D.r3.DoB,\n                           datX$Ext_CZ, datX$E.r3.DoB,\n                           datX$Con_CZ, datX$Agr_CZ, \n                           datX$Neu_CZ, datX$N.r1.DoB,\n                           datX$Opn_CZ, datX$O.r2.DoB\n                           ))\n\n\ncolnames(netform) = c(\"sex\",\"Japan\",'Yerkes','Edinburgh','origin',\n                      'Dom','D.r','Ext','E.r','Con','Agr',\n                      'Neu','N.r','Opn','O.r') \n\nrmatx = model.matrix( ~ sex + Japan + Yerkes + Edinburgh + origin + \n                        Dom + Ext + Con + Agr + Neu + Opn + \n                        D.r + E.r + N.r + O.r - 1, netform)\n\nahz.3 <- ahazpen(yLt, rmatx)\n\nplot(ahz.3, labels=TRUE)\n\n\n# keeping all the residualized guys doesn't help\n# step(s) back:\nnetform = data.frame(cbind(as.factor(datX$sex),\n                           as.factor(datX$sample=='Japan'),as.factor(datX$sample=='Yerkes'),\n                           as.factor(datX$sample=='Edinburgh'),\n                           as.factor(datX$origin), \n                           datX$D.r3.DoB,\n                           datX$E.r3.DoB,\n                           datX$Con_CZ, datX$Agr_CZ, \n                           datX$N.r1.DoB,\n                           datX$O.r2.DoB\n))\n\n\ncolnames(netform) = c(\"sex\",\"Japan\",'Yerkes','Edinburgh','origin',\n                      'D.r','E.r','Con','Agr',\n                      'N.r','O.r') \n\nrmatx = model.matrix( ~ sex + Japan + Yerkes + Edinburgh + origin + \n                        Con + Agr + \n                        D.r + E.r + N.r + O.r - 1, netform)\n\nahz.3a <- ahazpen(yLt, rmatx)\n\nplot(ahz.3a, labels=TRUE)\n\ncoef(ahz.3a)\n\n# Does reverting D and N do anything?\nnetform = data.frame(cbind(as.factor(datX$sex),\n                           as.factor(datX$sample=='Japan'),as.factor(datX$sample=='Yerkes'),\n                           as.factor(datX$sample=='Edinburgh'),\n                           as.factor(datX$origin), \n                           datX$Dom_CZ,\n                           datX$E.r3.DoB,\n                           datX$Con_CZ, datX$Agr_CZ, \n                           datX$Neu,\n                           datX$O.r2.DoB\n))\n\n\ncolnames(netform) = c(\"sex\",\"Japan\",'Yerkes','Edinburgh','origin',\n                      'Dom','E.r','Con','Agr',\n                      'Neu','O.r') \n\nrmatx = model.matrix( ~ sex + Japan + Yerkes + Edinburgh + origin + \n                        Con + Agr + \n                        Dom + E.r + Neu + O.r - 1, netform)\n\nahz.3b <- ahazpen(yLt, rmatx)\n\nplot(ahz.3b, labels=TRUE)\n\n# and removing the cubic for E?\nnetform = data.frame(cbind(as.factor(datX$sex),\n                           as.factor(datX$sample=='Japan'),as.factor(datX$sample=='Yerkes'),\n                           as.factor(datX$sample=='Edinburgh'),\n                           as.factor(datX$origin), \n                           datX$Dom_CZ,\n                           datX$E.r2.DoB,\n                           datX$Con_CZ, datX$Agr_CZ, \n                           datX$Neu,\n                           datX$O.r2.DoB\n))\n\n\ncolnames(netform) = c(\"sex\",\"Japan\",'Yerkes','Edinburgh','origin',\n                      'Dom','E.r','Con','Agr',\n                      'Neu','O.r') \n\nrmatx = model.matrix( ~ sex + Japan + Yerkes + Edinburgh + origin + \n                        Con + Agr + \n                        Dom + E.r + Neu + O.r - 1, netform)\n\nahz.3c <- ahazpen(yLt, rmatx, penalty = lasso.control(alpha=0.7))\n#ahx.3c <- ahazpen(yLt, rmatx, penalty = sscad.control(a=30, nsteps=4, init.sol=NULL, c=NULL)) # I'm not sure what this does\n\nplot(ahz.3c, labels=TRUE)\n\ncoef(ahz.3c)[,100]\n\n# Without ORIGIN:\n# Dom & Agr protect, Ext increases risk.\n\n# With ORIGIN:\n# Exactly the same. So leave ORIGIN in.\n\n",
    "created" : 1457982316720.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "852620248",
    "id" : "6FADA457",
    "lastKnownWriteTime" : 1457982534,
    "last_content_update" : 1457982534834,
    "path" : "C:/Users/s1229179/GitHub/R/longevity/ahaz-LtruncLASSOs.R",
    "project_path" : "ahaz-LtruncLASSOs.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}