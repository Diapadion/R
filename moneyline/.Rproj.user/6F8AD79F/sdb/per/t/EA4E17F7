{
    "contents" : "### team vs. team match-up analysis approach\n#\n\n\nfull14 <- cbind.data.frame(full14, result=bracket14$Round.1.Results)\n\n### Adding Sagerin stats into the mix\n\nfull14 <- full14[with(full14, order(full14$Team)),]\nfull14 <- cbind(full14, sagRank=sag14$sagRank, sagRating=sag14$RATING)\n\n # this needs to use the unreordered... order\n# to preserve matchings\n\nfull14 <- full14[match(order14,full14$Team),]\n#full14 <- full14[match(order14,full14$Team),]\n\n### now to compute differences\n\nvictDiffs14 <- NULL\n\ndataOverV <- c(1,5:21,23:24)\n\nfor (i in seq(1,dim(full14)[1],2)){\n  if (full14$result[i] == 'W'){\n    kpdat = full14[i,dataOverV]-full14[i+1,dataOverV]\n    vdrow = cbind.data.frame(winner=full14$Team[i], loser=full14$Team[i+1],kpdat)\n  }\n  else {\n    kpdat = full14[i+1,dataOverV]-full14[i,dataOverV]\n    vdrow = cbind.data.frame(winner=full14$Team[i+1], loser=full14$Team[i],kpdat)\n  }\n  \n  victDiffs14 <- rbind.data.frame(victDiffs14, vdrow)\n  \n}\n\n\n### some t-tests to see if any of these difference vars differ from null, and by how much\n\nlibrary(lsr)\n# \nt.test(victDiffs14$Pyth) # p < 0.00005\ncohensD(victDiffs14$Pyth) # 0.844\n\nt.test(victDiffs14$AdjO) # p < 0.0002 \ncohensD(victDiffs14$AdjO) # 0.772\n\nt.test(victDiffs14$AdjD) # p < 0.01\ncohensD(victDiffs14$AdjD) # 0.489\n\nt.test(victDiffs14$AdjT) # p = 0.111    \n#cohensD(victDiffs14$AdjT)\n\nt.test(victDiffs14$Luck) # p = 0.9434 ... surprise fucking surprise\n\nt.test(victDiffs14$SoS.Pyth) # p < 0.01\ncohensD(victDiffs14$SoS.Pyth) # 0.506\n\nt.test(victDiffs14$OppO) # p < 0.005\ncohensD(victDiffs14$OppO)\n    \nt.test(victDiffs14$OppD) # p < 0.05\ncohensD(victDiffs14$OppD)\n\nt.test(victDiffs14$NCSoS.Pyth) # p = 0.9116\n\n\n### now model pairwise victory with a glm\n#     select the lower team, and subtract the first\n#     will help pick out some upsets (?)\n\n\nkpDiffs14 <- NULL\n\nfor (i in seq(1,dim(full14)[1],2)){\n  kpdat = full14[i+1,dataOverV]-full14[i,dataOverV]\n  vdrow = cbind.data.frame(ref.team=full14$Team[i+1], opponent=full14$Team[i],kpdat,result=full14$result[i+1])\n    \n  kpDiffs14 <- rbind.data.frame(kpDiffs14, vdrow)\n  \n}\n\ngm.diff14 <- glm(result ~ SoS.Pyth + OppO\n                 # + AdjO + AdjD \n                 # + Pyth + OppD\n                 #+ AdjT + NCSoS.Pyth\n                 + sagRating #+ sagRank               \n                 + Rank\n                 , data = kpDiffs14, family = \"binomial\")\n\ngm.diff14.stp <- step(gm.diff14)\n\ngm.diff14_2 <- glm(result ~ Pyth + AdjO + AdjD + SoS.Pyth + OppO, data = kpDiffs14, family = \"binomial\")\n\ngm.diff14_3 <- glm(result ~ Rank, data=kpDiffs14, family = 'binomial')\n\ngm.diff14_4 <- glm(result ~ Rank + sagRating, data=kpDiffs14, family = 'binomial')\n\n\n\n# 2013\n\nkp13 <- cbind.data.frame(kp13, result=bracket13$Round.1.Results)\n\n\n# this needs to use the unreordered... order\n# to preserve matchings\n\nkp13 <- kp13[match(order13,kp13$Team),]\n\n### now to compute differences\n\nvictDiffs13 <- NULL\n\nfor (i in seq(1,dim(kp13)[1],2)){\n  if (kp13$result[i] == 'W'){\n    kpdat = kp13[i,dataOverV]-kp13[i+1,dataOverV]\n    vdrow = cbind.data.frame(winner=kp13$Team[i], loser=kp13$Team[i+1],kpdat)\n  }\n  else {\n    kpdat = kp13[i+1,dataOverV]-kp13[i,dataOverV]\n    vdrow = cbind.data.frame(winner=kp13$Team[i+1], loser=kp13$Team[i],kpdat)\n  }\n  \n  victDiffs13 <- rbind.data.frame(victDiffs13, vdrow)\n  \n}\n\nkpDiffs13 <- NULL\n\nfor (i in seq(1,dim(kp13)[1],2)){\n  kpdat = kp13[i+1,dataOverV]-kp13[i,dataOverV]\n  vdrow = cbind.data.frame(ref.team=kp13$Team[i+1], opponent=kp13$Team[i],kpdat,result=kp13$result[i+1])\n  \n  kpDiffs13 <- rbind.data.frame(kpDiffs13, vdrow)\n  \n}\n\ngm.diff13 <- glm(result ~ Rank + Pyth + AdjO + AdjD + AdjT + SoS.Pyth + OppO + OppD + NCSoS.Pyth, data = kpDiffs13, family = \"binomial\")\n\ngm.diff13.sp <- step(gm.diff13)\n\n#gm.diff2 <- glm(result ~ Pyth + AdjO + AdjD + SoS.Pyth + OppO, data = kpDiffs14, family = \"binomial\")\n\n\n\nt.test(victDiffs13$Pyth) # p < 0.005\ncohensD(victDiffs13$Pyth)\n\n# - OppO      1   22.749 30.749\n# - AdjD      1   24.102 32.102\n# - SoS.Pyth  1   25.273 33.273\n# - AdjO      1   33.315 41.315\n# \n# - Pyth      1   13.592 23.592\n# - OppD      1   14.780 24.780\n# - Rank      1   15.343 25.343\n# - SoS.Pyth  1   16.254 26.254\n# - OppO      1   16.404 26.404\n# \n## notable predictors appear to be OppO, Rank, SoS.Pyth...\n\ngm.diff13_z <- glm(result ~ SoS.Pyth + OppO\n                   #  + Pyth + AdjO + AdjD + OppD\n                   #+ AdjT + NCSoS.Pyth\n                   + Rank\n                   , data = kpDiffs13, family = \"binomial\")\ngm.diff13_z.stp <- step(gm.diff13_z)\n\n\n# 2012\n\nkp12 <- cbind.data.frame(kp12, result=bracket12$Round.1.Results)\n\n\n# this needs to use the unreordered... order\n# to preserve matchings\n\nkp12 <- kp12[match(order12,kp12$Team),]\n\n### now to compute differences...\n\nkpDiffs12 <- NULL\n\nfor (i in seq(1,dim(kp12)[1],2)){\n  kpdat = kp12[i+1,dataOverV]-kp12[i,dataOverV]\n  vdrow = cbind.data.frame(ref.team=kp12$Team[i+1], opponent=kp12$Team[i],kpdat,result=kp12$result[i+1])\n  \n  kpDiffs12 <- rbind.data.frame(kpDiffs12, vdrow)\n  \n}\n\n\ngm.diff12 <- glm(result ~ \n                   #Rank + # won't bloody converge with rank\n                 Pyth + AdjO + AdjD + AdjT + SoS.Pyth + OppO + OppD + NCSoS.Pyth, data = kpDiffs12, family = \"binomial\")\n\ngm.diff12.stp = step(gm.diff12)\n\ngm.diff12_z <- glm(result ~ Rank + OppO + SoS.Pyth, data = kpDiffs12, family = \"binomial\")\n\n### Interactions testing\n\ngmi.diff14 <- glm(result ~ Rank * SoS.Pyth * OppO, data = kpDiffs14, family = \"binomial\")\ngmi.diff14.stp <- step(gmi.diff14)\n\n\n\n",
    "created" : 1425729742239.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "998307014",
    "id" : "EA4E17F7",
    "lastKnownWriteTime" : 1427149420,
    "path" : "~/GitHub/R/moneyline/matchup.R",
    "project_path" : "matchup.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}