{
    "contents" : "### Data import script\n#\n# should be generalizable across files\n# perhaps construct as function...\n\n\nbracket12 <- read.csv('2012.csv')\nbracket13 <- read.csv('2013.csv')\nbracket14 <- read.csv('2014.csv')\n\nkp14 <- read.csv('KP2014.csv')\nkp13 <- read.csv('KP2013.csv')\n\nlibrary(Hmisc)\n\n# strip some stuff out of the KP data\n\n# kp14 <- kp14[grepl(' ',kp14$Team),]\n# \n# c(\"USDZAR Curncy\", \"R157 Govt\", \"SPX Index\")\nkp14$Team = gsub(\"\\\\ [0-9]*$\", \"\", kp14$Team)\n\norder14 = bracket14$Team\n\n\n# tabulate wins for teams\nfor (i in 1 : dim(bracket14)[1]) {\n  ifelse(bracket14$Round.1.Results[i] == 'W', bracket14$wins[i] <- 1, bracket14$wins[i] <- 0)\n}\n\nbracket14$Team.1 <- factor(bracket14$Team.1, levels=levels(bracket14$Team))\nbracket14$Team.2 <- factor(bracket14$Team.2, levels=levels(bracket14$Team))\nbracket14$Team.3 <- factor(bracket14$Team.3, levels=levels(bracket14$Team))\nbracket14$Team.4 <- factor(bracket14$Team.4, levels=levels(bracket14$Team))\nbracket14$Team.5 <- factor(bracket14$Team.5, levels=levels(bracket14$Team))\n\n\n\nfor (j in 1 : dim(bracket14)[1]) {\n  if (bracket14$Round.2.Results[j] == 'W'){\n    inc(bracket14$wins[bracket14$Team.1[j]==bracket14$Team]) <- 1\n  }\n  if (bracket14$Round.3.Results[j] == 'W'){\n    inc(bracket14$wins[bracket14$Team.2[j]==bracket14$Team]) <- 1\n  }\n  if (bracket14$Round.4.Results[j] == 'W'){\n    inc(bracket14$wins[bracket14$Team.3[j]==bracket14$Team]) <- 1\n  }\n  if (bracket14$Round.5.Results[j] == 'W'){\n    inc(bracket14$wins[bracket14$Team.4[j]==bracket14$Team]) <- 1\n  }\n  if (bracket14$Round.6.Results[j] == 'W'){\n    inc(bracket14$wins[bracket14$Team.5[j]==bracket14$Team]) <- 1\n  }\n  \n}\n\n#inc(bracket14$wins[bracket14$Team.1[2]==bracket14$Team])\n\n# sort both df's\n\nkp14 <- kp14[with(kp14, order(kp14$Team)),]\nbracket14 <- bracket14[with(bracket14, order(bracket14$Team)),]\n\nmod1 <- lm(log(bracket14$wins + 1) ~ kp14$Rank + kp14$Pyth + kp14$AdjO #+ kp14$Conf \n           + kp14$X + kp14$AdjD + kp14$X.1 + kp14$AdjT + kp14$X.2 + kp14$Luck + kp14$X.3\n           + kp14$SoS.Pyth + kp14$X.4 + kp14$OppO + kp14$X.5 + kp14$OppD + kp14$X.6\n           + kp14$NCSoS.Pyth + kp14$X.7)\n\n#mod1.st <- step(mod1)\n\n#mod2.st <- step(mod2)\n\n\n# 2013\n\nkp13$Team = gsub(\"\\\\ [0-9]*$\", \"\", kp13$Team)\n\norder13 = bracket13$Team\n\n\n# tabulate wins for teams\nfor (i in 1 : dim(bracket13)[1]) {\n  ifelse(bracket13$Round.1.Results[i] == 'W', bracket13$wins[i] <- 1, bracket13$wins[i] <- 0)\n}\n\nbracket13$Team.1 <- factor(bracket13$Team.1, levels=levels(bracket13$Team))\nbracket13$Team.2 <- factor(bracket13$Team.2, levels=levels(bracket13$Team))\nbracket13$Team.3 <- factor(bracket13$Team.3, levels=levels(bracket13$Team))\nbracket13$Team.4 <- factor(bracket13$Team.4, levels=levels(bracket13$Team))\nbracket13$Team.5 <- factor(bracket13$Team.5, levels=levels(bracket13$Team))\n\n\nfor (j in 1 : dim(bracket13)[1]) {\n  if (bracket13$Round.2.Results[j] == 'W'){\n    inc(bracket13$wins[bracket13$Team.1[j]==bracket13$Team]) <- 1\n  }\n  if (bracket13$Round.3.Results[j] == 'W'){\n    inc(bracket13$wins[bracket13$Team.2[j]==bracket13$Team]) <- 1\n  }\n  if (bracket13$Round.4.Results[j] == 'W'){\n    inc(bracket13$wins[bracket13$Team.3[j]==bracket13$Team]) <- 1\n  }\n  if (bracket13$Round.5.Results[j] == 'W'){\n    inc(bracket13$wins[bracket13$Team.4[j]==bracket13$Team]) <- 1\n  }\n  if (bracket13$Round.6.Results[j] == 'W'){\n    inc(bracket13$wins[bracket13$Team.5[j]==bracket13$Team]) <- 1\n  }\n  \n}\n\n#inc(bracket13$wins[bracket13$Team.1[2]==bracket13$Team])\n\n# sort both df's\n\nkp13 <- kp13[with(kp13, order(kp13$Team)),]\nbracket13 <- bracket13[with(bracket13, order(bracket13$Team)),]\n\n\n\n# 2012\n\n",
    "created" : 1425137653701.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1239585746",
    "id" : "B834F5DB",
    "lastKnownWriteTime" : 1425576620,
    "path" : "C:/Users/s1229179/git-repos/R/moneyline/dataImport.R",
    "project_path" : "dataImport.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}